<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LIFF ミニアプリ：動画再生</title>
</head>

<body>
  <div>
    <h2>LIFF ミニアプリ：動画再生</h2>
    <p>userId: <span id="userId">読み込み中...</span></p>

    <div style="font-size:12px; opacity:0.8; line-height:1.6;">
      <div>inClient: <span id="dbg_inClient">-</span></div>
      <div>loggedIn: <span id="dbg_loggedIn">-</span></div>
      <div>idToken.sub: <span id="dbg_tokenSub">-</span></div>
      <div>profile.userId: <span id="dbg_profileUserId">-</span></div>
      <div>profile err: <span id="dbg_profileErr">-</span></div>
      <div>loadedmetadata: <span id="dbg_loadedmetadata">-</span></div>
      <div>timeupdate: <span id="dbg_timeupdate">-</span></div>
      <div>playing: <span id="dbg_playing">-</span></div>
      <div>video err: <span id="dbg_videoErr">-</span></div>
    </div>

    <video id="video" controls playsinline preload="metadata" style="width:100%;max-width:480px;">
      <!-- Viteなら public/video/sample.mp4 に置いて /video/sample.mp4 で参照が安全 -->
      <source src="/video/sample.mp4" type="video/mp4" />
    </video>

    <p>視聴位置: <span id="pos">0</span> 秒</p>
  </div>

  <!-- これが重要：Viteはここから main.ts を読む -->
  <script type="module" src="/src/main.ts"></script>
</body>

</html>